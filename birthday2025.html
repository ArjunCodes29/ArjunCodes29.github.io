<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arjun's Birthday Celebration</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #343434;
            color: #333;
            margin: 0;
            padding: 20px;
        }
        h1 {
            color: #000000;
        }
        .updates {
            margin-top: 20px;
            padding: 20px; /* Increased padding for emphasis */
            background: #ffeeba;
            border-left: 6px solid #ffc107;
            font-weight: bold; /* Make text bold */
            font-size: 1.2em; /* Increase font size for visibility */
            border-radius: 5px; /* Added border radius for a softer look */
        }
        .event-details {
            background: #06fde491;
            border-radius: 5px;
            padding: 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .suggestions {
            margin-top: 20px;
            padding: 10px;
            background: #e7f3fe;
            border-left: 6px solid #2196F3;
        }
        .rsvp {
            margin-top: 20px;
            padding: 20px;
            background: #fbff00bf;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        a {
            color: #000000;
        }
        .photo-montage {
            margin-top: 20px;
            text-align: center;
        }
        .gallery {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            position: relative; /* Added for overlapping */
        }
        .montage-image {
            margin: 10px;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            transition: transform 0.3s ease; /* Ensure smooth transition for scale effect */
            position: relative; /* Added for overlapping */
            z-index: 1; /* Default z-index */
            max-width: 200px; /* Increased maximum width for images */
            height: auto; /* Maintain aspect ratio */
            object-fit: cover; /* Prevent distortion */
        }
        .montage-image:hover {
            transform: scale(1.2); /* Scale up on hover */
            z-index: 10; /* Bring to front on hover */
        }
        .navigation {
            margin-top: 20px;
        }
        .button {
            padding: 10px 20px;
            background-color: #2196F3;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        .button:disabled {
            background-color: #ccc;
        }
    </style>
</head>
<body>

    <div class="updates">
        <h2>Updates and Announcements</h2>
        <p><del>Bar crawl might not happen (<del>40%</del> 10% it happens), this is because I don't feel like drinking but may spontaneously change mind based on vibes.</del></p>
        <p><del>I am feeling kind of ill, hence there is 30% chance we cancel.</del></p>
        <p>I am not feeling ill anymore, barcrawl may or may not happen depending on what the mood is, but 8pm JCR christ church will happen!</p>
        <p><strong>How to get in:</strong> The best thing to do would be to come to the Tom gate entrance of Christ Church on St Aldates and then message me on Discord/WhatsApp or call me.</p>
    </div>

    <div class="event-details">
        <h1>You're Invited to My Birthday Celebration!</h1>
        <p><strong>Date:</strong> 29th January (Wednesday)</p>
        <p><strong>8 PM:</strong> Meet at <del>a secret location</del> <strong>Christ Church JCR</strong> for cake cutting! (Location will be revealed after you sign up in the form (this is just so i have a rough number estimate))</p>
        <p><strong>10 PM-ish:</strong> Bar crawl begins!</p>
        <p><strong>12 AM:</strong> After-party at my room!</p>
        <p><strong>2 AM:</strong> Event concludes!</p>
        <p>I know loads of you don't drink but feel free to join the crawl anyways or just come straight to my room! If you have lectures and can't stay late, please come for the cake cutting at 8 PM. It's going to be fun, and I can't wait to see you all!</p>
        <p><strong>Other notes?</strong> There will hopefully be just enough cake for everyone. Also if you have a chessboard + clock bring it (bughouse?), and if you have any other games that you think may be fun bring it along.</p>
    </div>

    <div class="suggestions">
        <h2>Bar Suggestions</h2>
        <p>I'm open to suggestions about which bar to go to, but I'm thinking of starting at Bear. Other options could be Undie in CHCH, the Buttery, or Baliol Bar. Let me know your thoughts!</p>
        <p>If you want to share your suggestions, please fill out this form: <a href="https://docs.google.com/forms/d/e/1FAIpQLSeY061Py3W83hiVki3fv-9tsOWwlPONfZVB58iNGmXx-LpgTg/viewform?usp=dialog" target="_blank">Birthday Suggestion Form</a></p>
    </div>

    <div class="rsvp">
        <h2>RSVP Here!</h2>
        <p>Please let me know if you can make it by filling out this form: <a href="https://docs.google.com/forms/d/e/1FAIpQLSeY061Py3W83hiVki3fv-9tsOWwlPONfZVB58iNGmXx-LpgTg/viewform?usp=dialog" target="_blank">RSVP Form</a></p>
    </div>

    <div class="photo-montage">
        <h2>Birthday Photo Montage</h2>
        <div class="gallery"></div>
        <div class="navigation">
            <button class="button" id="prevButton">Previous</button>
            <button class="button" id="nextButton">Next</button>
        </div>
    </div>

    <script>
        const imagesPerPage = 18; // Number of images to display per chunk
        let currentPage = 0;
        let images = [];

        async function loadImages() {
            try {
                const response = await fetch('pictures/bday/');
                if (!response.ok) throw new Error('Network response was not ok');
                const text = await response.text();
                const parser = new DOMParser();
                const htmlDocument = parser.parseFromString(text, 'text/html');
                images = Array.from(htmlDocument.querySelectorAll('a'))
                    .map(a => a.getAttribute('href'))
                    .filter(href => /\.(JPG|jpeg|png|gif)$/.test(href)); // Filter for image files

                // Shuffle the images array
                images.sort(() => Math.random() - 0.5);
                displayImages();
            } catch (error) {
                console.error('Error loading images:', error);
            }
        }

        function displayImages() {
            const gallery = document.querySelector('.gallery');
            gallery.innerHTML = ''; // Clear previous images
            const start = currentPage * imagesPerPage;
            const end = Math.min(start + imagesPerPage, images.length); // Ensure end does not exceed total images
            const chunk = images.slice(start, end);

            chunk.forEach(image => {
                const imgElement = document.createElement('img');
                imgElement.src = image; // Ensure this path is correct
                imgElement.alt = 'Birthday Photo';
                imgElement.loading = 'eager'; 
                imgElement.className = 'montage-image';
                imgElement.style.transform = `rotate(${Math.random() * 20 - 10}deg)`; // Random rotation
                gallery.appendChild(imgElement);
            });

            // Update button states
            document.getElementById('prevButton').disabled = images.length === 0; // Disable if no images
            document.getElementById('nextButton').disabled = images.length === 0; // Disable if no images
        }

        document.getElementById('prevButton').addEventListener('click', () => {
            currentPage = (currentPage - 1 + Math.ceil(images.length / imagesPerPage)) % Math.ceil(images.length / imagesPerPage);
            displayImages();
        });

        document.getElementById('nextButton').addEventListener('click', () => {
            currentPage = (currentPage + 1) % Math.ceil(images.length / imagesPerPage);
            displayImages();
        });

        loadImages();
    </script>
</body>
</html>
